// =============================================
// DIGITAL WARDROBE - DESIGN SYSTEM & THEMING
// =============================================

@use '@angular/material' as mat;

// -----------------------------------------
// 1. GOOGLE FONTS IMPORT
// -----------------------------------------
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap');

// -----------------------------------------
// 2. CUSTOM COLOR PALETTES
// -----------------------------------------

// Warm Taupe - Primary
$primary-palette: (
  50: #faf9f7,
  100: #f5f3f0,
  200: #e8e4de,
  300: #d4cec4,
  400: #b8b0a3,
  500: #8B7355,
  // Primary grounded taupe
  600: #756045,
  700: #5f4d38,
  800: #4a3c2d,
  900: #3a2f24,
  contrast: (50: #3a2f24,
    100: #3a2f24,
    200: #3a2f24,
    300: #3a2f24,
    400: #ffffff,
    500: #ffffff,
    600: #ffffff,
    700: #ffffff,
    800: #ffffff,
    900: #ffffff,
  )
);

// Soft Sage - Accent
$tertiary-palette: (
  50: #f6f8f6,
  100: #e8ede8,
  200: #d1dcd1,
  300: #b0c4b0,
  400: #8aa78a,
  500: #A3B18A,
  // Soft sage green
  600: #7A8568,
  700: #557255,
  800: #465c46,
  900: #313d31,
  contrast: (50: #313d31,
    100: #313d31,
    200: #313d31,
    300: #313d31,
    400: #ffffff,
    500: #ffffff,
    600: #ffffff,
    700: #ffffff,
    800: #ffffff,
    900: #ffffff,
  )
);

// -----------------------------------------
// 3. MATERIAL THEME CONFIGURATION
// -----------------------------------------
html {
  height: 100%;

  @include mat.theme((color: (primary: $primary-palette,
        tertiary: $tertiary-palette,
        theme-type: light,
      ),
      typography: Inter,
      density: 0,
    ));
}

// -----------------------------------------
// 4. CSS CUSTOM PROPERTIES (Design Tokens)
// -----------------------------------------
:root {
  // Brand Colors - Warm Heritage
  --dw-primary: #7d624a;
  --dw-primary-light: #a78b72;
  --dw-primary-dark: #5f4937;
  --dw-primary-glow: color-mix(in srgb, var(--dw-primary) 24%, transparent);
  --dw-on-primary: #fffdf9;

  // Accent Colors - Burnished Copper
  --dw-accent: #c47a34;
  --dw-accent-light: #dc9a5c;
  --dw-accent-dark: #995a24;

  // Semantic Colors
  --dw-success: #4f8f67;
  --dw-warning: #c9822d;
  --dw-error: #b8514d;
  --dw-info: #3f7ca8;

  // Surface Colors
  --dw-surface-base: #f5f2ed;
  --dw-surface-elevated: #fffdf9;
  --dw-surface-card: #f1ece4;
  --dw-surface-overlay: color-mix(in srgb, var(--dw-surface-elevated) 92%, transparent);
  --dw-surface-hover: color-mix(in srgb, var(--dw-surface-card) 76%, var(--dw-surface-elevated) 24%);

  // Text Colors
  --dw-text-primary: #2f241b;
  --dw-text-secondary: #6e6052;
  --dw-text-muted: #9a8d80;

  // Structural Colors
  --dw-border-subtle: color-mix(in srgb, var(--dw-primary) 14%, transparent);
  --dw-border-strong: color-mix(in srgb, var(--dw-primary) 28%, transparent);
  --dw-overlay-scrim: rgba(18, 14, 10, 0.42);
  --dw-image-overlay: linear-gradient(180deg, rgba(14, 11, 8, 0.58) 0%, transparent 82%);

  // Gradients
  --dw-gradient-primary: linear-gradient(135deg, #6a4f39 0%, #87664a 46%, #a97b55 100%);
  --dw-gradient-subtle: linear-gradient(180deg,
      color-mix(in srgb, var(--dw-primary) 15%, transparent) 0%,
      transparent 100%);
  --dw-gradient-card: linear-gradient(148deg, #fffdf9 0%, #f2ece4 100%);
  --dw-hover-gradient: linear-gradient(150deg,
      color-mix(in srgb, var(--dw-surface-elevated) 82%, var(--dw-primary) 18%) 0%,
      var(--dw-surface-card) 100%);

  // Shadows
  --dw-shadow-sm: 0 2px 8px rgba(37, 28, 20, 0.06);
  --dw-shadow-md: 0 12px 28px rgba(37, 28, 20, 0.12);
  --dw-shadow-lg: 0 22px 46px rgba(37, 28, 20, 0.16);
  --dw-shadow-glow: 0 0 0 1px color-mix(in srgb, var(--dw-primary) 22%, transparent),
    0 12px 30px color-mix(in srgb, var(--dw-primary) 18%, transparent);

  // Border Radius - Slightly softer
  --dw-radius-sm: 8px;
  --dw-radius-md: 16px;
  --dw-radius-lg: 24px;
  --dw-radius-xl: 32px;
  --dw-radius-full: 9999px;

  // Transitions
  --dw-transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --dw-transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);
  --dw-transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
  --dw-ease-emphasis: cubic-bezier(0.2, 0, 0, 1);
  --dw-motion-fast: 140ms;
  --dw-motion-base: 260ms;
  --dw-motion-slow: 420ms;

  // Spacing
  --dw-spacing-xs: 4px;
  --dw-spacing-sm: 8px;
  --dw-spacing-md: 16px;
  --dw-spacing-lg: 24px;
  --dw-spacing-xl: 32px;
  --dw-spacing-2xl: 64px;

  // Layout
  --dw-sidebar-width: 280px;
  // Increased width slightly to prevent icon cutting
  --dw-sidebar-collapsed: 88px;
  --dw-header-height: 80px; // Taller header for luxury feel
  --dw-mobile-nav-height: 72px;
  --dw-safe-bottom: env(safe-area-inset-bottom, 0px);

}

// -----------------------------------------
// 4b. DARK MODE VARIABLES
// -----------------------------------------
[data-theme='dark'] {
  --dw-primary: #e2c9ae;
  --dw-primary-light: #f2e3d3;
  --dw-primary-dark: #b99573;
  --dw-primary-glow: color-mix(in srgb, var(--dw-primary) 20%, transparent);
  --dw-on-primary: #1b140e;

  --dw-accent: #efad66;
  --dw-accent-light: #f6c88f;
  --dw-accent-dark: #d28b41;
  --dw-success: #70b08a;
  --dw-warning: #efb15a;
  --dw-error: #df8d86;
  --dw-info: #84b7de;

  --dw-surface-base: #11100f;
  --dw-surface-elevated: #1a1816;
  --dw-surface-card: #26221e;
  --dw-surface-overlay: color-mix(in srgb, var(--dw-surface-elevated) 88%, transparent);
  --dw-surface-hover: color-mix(in srgb, var(--dw-surface-card) 78%, var(--dw-primary) 22%);

  --dw-text-primary: #f5ede2;
  --dw-text-secondary: #ccbca9;
  --dw-text-muted: #9d8b77;

  --dw-border-subtle: color-mix(in srgb, var(--dw-primary) 20%, transparent);
  --dw-border-strong: color-mix(in srgb, var(--dw-primary) 36%, transparent);
  --dw-overlay-scrim: rgba(4, 3, 2, 0.62);
  --dw-image-overlay: linear-gradient(180deg, rgba(0, 0, 0, 0.65) 0%, transparent 86%);

  --dw-gradient-primary: linear-gradient(135deg, #b48b62 0%, #d4aa79 55%, #efbd87 100%);
  --dw-gradient-subtle: linear-gradient(180deg,
      color-mix(in srgb, var(--dw-primary) 20%, transparent) 0%,
      transparent 100%);
  --dw-gradient-card: linear-gradient(148deg, #2a2521 0%, #1b1815 100%);
  --dw-hover-gradient: linear-gradient(150deg,
      color-mix(in srgb, var(--dw-surface-card) 78%, var(--dw-primary) 22%) 0%,
      color-mix(in srgb, var(--dw-surface-elevated) 88%, var(--dw-primary) 12%) 100%);

  --dw-shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.28);
  --dw-shadow-md: 0 16px 30px rgba(0, 0, 0, 0.38);
  --dw-shadow-lg: 0 26px 56px rgba(0, 0, 0, 0.5);
  --dw-shadow-glow: 0 0 0 1px color-mix(in srgb, var(--dw-primary) 20%, transparent),
    0 14px 36px color-mix(in srgb, var(--dw-primary) 16%, transparent);
}

// -----------------------------------------
// 5. BODY & GLOBAL STYLES
// -----------------------------------------
body {
  color-scheme: light;
  background: var(--dw-surface-base);
  color: var(--dw-text-primary);
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  margin: 0;
  padding: 0;
  height: 100%;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

body[data-theme='dark'] {
  color-scheme: dark;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

@media (max-width: 768px) {
  :root {
    --dw-header-height: 64px;
  }

  h1 {
    font-size: 1.75rem;
  }

  h2 {
    font-size: 1.4rem;
  }
}

// -----------------------------------------
// 6. TYPOGRAPHY UTILITIES
// -----------------------------------------
.font-heading {
  font-family: 'Outfit', sans-serif;
}

.text-gradient {
  background: var(--dw-gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: 'Outfit', sans-serif;
  color: var(--dw-text-primary);
  margin: 0;
  line-height: 1.2;
}

h1 {
  font-size: 2.5rem;
  font-weight: 700;
}

h2 {
  font-size: 2rem;
  font-weight: 600;
}

h3 {
  font-size: 1.5rem;
  font-weight: 600;
}

h4 {
  font-size: 1.25rem;
  font-weight: 500;
}

// -----------------------------------------
// 7. SCROLLBAR STYLING
// -----------------------------------------
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--dw-surface-elevated);
}

::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--dw-primary) 34%, transparent);
  border-radius: var(--dw-radius-full);

  &:hover {
    background: var(--dw-primary-light);
  }
}

// -----------------------------------------
// 8. COMPONENT UTILITY CLASSES
// -----------------------------------------

// Glass morphism effect
.glass {
  background: var(--dw-surface-overlay);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--dw-border-subtle);
  box-shadow: var(--dw-shadow-sm);
}

// Card styles
.card {
  background: var(--dw-gradient-card);
  border-radius: var(--dw-radius-lg);
  border: 1px solid var(--dw-border-subtle);
  transition: all var(--dw-transition-normal);

  &:hover {
    border-color: var(--dw-border-strong);
    box-shadow: var(--dw-shadow-md);
    transform: translateY(-2px);
  }
}

// Glow effect on hover
.glow-hover {
  transition: all var(--dw-transition-normal);

  &:hover {
    box-shadow: var(--dw-shadow-glow);
  }
}

// Button base styles
.btn-primary {
  background: var(--dw-gradient-primary);
  color: white;
  border: none;
  padding: var(--dw-spacing-sm) var(--dw-spacing-lg);
  border-radius: var(--dw-radius-md);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--dw-transition-fast);

  &:hover {
    transform: translateY(-1px);
    box-shadow: var(--dw-shadow-md), var(--dw-shadow-glow);
  }

  &:active {
    transform: translateY(0);
  }
}

// Icon button
.icon-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: var(--dw-radius-md);
  background: transparent;
  border: none;
  color: var(--dw-text-secondary);
  cursor: pointer;
  transition: all var(--dw-transition-fast);

  &:hover {
    background: var(--dw-surface-card);
    color: var(--dw-text-primary);
  }
}

// Badge styles
.badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: var(--dw-radius-full);
  font-size: 12px;
  font-weight: 500;

  &.badge-primary {
    background: color-mix(in srgb, var(--dw-primary) 16%, transparent);
    color: var(--dw-primary-dark);
  }

  &.badge-accent {
    background: color-mix(in srgb, var(--dw-accent) 16%, transparent);
    color: var(--dw-accent-dark);
  }

  &.badge-success {
    background: color-mix(in srgb, var(--dw-success) 16%, transparent);
    color: var(--dw-success);
  }
}

// -----------------------------------------
// 9. LAYOUT UTILITIES
// -----------------------------------------
.flex {
  display: flex;
}

.flex-col {
  flex-direction: column;
}

.items-center {
  align-items: center;
}

.justify-center {
  justify-content: center;
}

.justify-between {
  justify-content: space-between;
}

.gap-sm {
  gap: var(--dw-spacing-sm);
}

.gap-md {
  gap: var(--dw-spacing-md);
}

.gap-lg {
  gap: var(--dw-spacing-lg);
}

// -----------------------------------------
// 10. ANIMATION KEYFRAMES
// -----------------------------------------
@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes pulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.5;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }

  100% {
    background-position: 200% 0;
  }
}

.animate-fade-in {
  animation: fadeIn 340ms var(--dw-ease-emphasis);
}

.animate-slide-up {
  animation: slideInUp 420ms var(--dw-ease-emphasis);
}

.animate-slide-left {
  animation: slideInLeft 420ms var(--dw-ease-emphasis);
}

.animate-fade-in>section {
  opacity: 0;
  animation: slideInUp var(--dw-motion-base) var(--dw-ease-emphasis) forwards;
}

.animate-fade-in>section:nth-of-type(1) {
  animation-delay: 30ms;
}

.animate-fade-in>section:nth-of-type(2) {
  animation-delay: 70ms;
}

.animate-fade-in>section:nth-of-type(3) {
  animation-delay: 110ms;
}

.animate-fade-in>section:nth-of-type(4) {
  animation-delay: 150ms;
}

.animate-fade-in>section:nth-of-type(5) {
  animation-delay: 190ms;
}

.animate-fade-in>section:nth-of-type(6) {
  animation-delay: 230ms;
}

// Loading skeleton
.skeleton {
  background: linear-gradient(90deg,
      var(--dw-surface-card) 25%,
      var(--dw-surface-elevated) 50%,
      var(--dw-surface-card) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--dw-radius-sm);
}

// -----------------------------------------
// 10b. Dashboard Loading Experience
// -----------------------------------------
.dashboard {
  .fashion-loader,
  .runway-loader,
  .spotlight-loader {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--dw-spacing-md);
    padding: 12px 14px;
    margin-bottom: var(--dw-spacing-md);
    border-radius: var(--dw-radius-lg);
    border: 1px solid var(--dw-border-subtle);
    background:
      radial-gradient(
        circle at 85% 15%,
        color-mix(in srgb, var(--dw-primary) 16%, transparent),
        transparent 44%
      ),
      linear-gradient(
        160deg,
        color-mix(in srgb, var(--dw-surface-elevated) 86%, var(--dw-primary) 14%),
        var(--dw-surface-card)
      );
    overflow: hidden;
  }

  .fashion-loader::after,
  .runway-loader::after,
  .spotlight-loader::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      110deg,
      transparent 0%,
      color-mix(in srgb, var(--dw-primary) 8%, transparent) 40%,
      transparent 65%
    );
    transform: translateX(-120%);
    animation: dw-loader-sweep 2.4s ease-in-out infinite;
    pointer-events: none;
  }

  .loader-icons {
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 1;
  }

  .loader-icon-chip {
    width: 36px;
    height: 36px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 11px;
    border: 1px solid color-mix(in srgb, var(--dw-primary) 18%, transparent);
    color: var(--dw-primary);
    background:
      linear-gradient(
        135deg,
        color-mix(in srgb, var(--dw-primary) 16%, transparent),
        color-mix(in srgb, var(--dw-surface-elevated) 92%, transparent)
      );
    box-shadow: var(--dw-shadow-sm);
    animation: dw-loader-bob 1.3s ease-in-out infinite;
  }

  .loader-icon-chip:nth-child(2) {
    animation-delay: 120ms;
  }

  .loader-icon-chip:nth-child(3) {
    animation-delay: 240ms;
  }

  .loader-icon-chip:nth-child(4) {
    animation-delay: 360ms;
  }

  .loader-icon-chip mat-icon {
    font-size: 18px;
    width: 18px;
    height: 18px;
  }

  .loader-caption {
    position: relative;
    z-index: 1;
    font-size: 12px;
    letter-spacing: 0.01em;
    color: var(--dw-text-secondary);
  }

  .loader-caption::after {
    content: '...';
    display: inline-block;
    width: 14px;
    overflow: hidden;
    vertical-align: bottom;
    animation: dw-loader-dots 1s steps(4, end) infinite;
  }

  .runway-loader,
  .spotlight-loader {
    flex-direction: column;
  }

  .runway-track {
    width: min(330px, 100%);
    height: 44px;
    position: relative;
    overflow: hidden;
    z-index: 1;
  }

  .runway-track::before {
    content: '';
    position: absolute;
    inset: auto 0 50%;
    height: 3px;
    transform: translateY(50%);
    border-radius: 999px;
    background: color-mix(in srgb, var(--dw-primary) 32%, transparent);
  }

  .runway-track::after {
    content: '';
    position: absolute;
    left: -18%;
    top: 0;
    width: 28%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      color-mix(in srgb, var(--dw-primary) 16%, transparent),
      transparent
    );
    filter: blur(1px);
    animation: dw-runway-light 2s linear infinite;
  }

  .runway-item {
    position: absolute;
    top: 50%;
    width: 30px;
    height: 30px;
    margin-top: -15px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 999px;
    border: 1px solid color-mix(in srgb, var(--dw-primary) 20%, transparent);
    color: var(--dw-primary);
    background: var(--dw-surface-elevated);
    animation: dw-runway-glide 1.7s linear infinite;
    z-index: 1;
  }

  .runway-item:nth-child(1) {
    animation-delay: 0ms;
  }

  .runway-item:nth-child(2) {
    animation-delay: 560ms;
  }

  .runway-item:nth-child(3) {
    animation-delay: 1120ms;
  }

  .runway-item mat-icon {
    font-size: 17px;
    width: 17px;
    height: 17px;
  }

  .skeleton-card {
    position: relative;
    overflow: hidden;
    pointer-events: none;
  }

  .skeleton-card::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      115deg,
      transparent 5%,
      color-mix(in srgb, var(--dw-surface-elevated) 56%, transparent) 42%,
      transparent 66%
    );
    transform: translateX(-140%);
    animation: dw-loader-sweep 2.2s ease-in-out infinite;
  }

  .skeleton-block,
  .skeleton-line,
  .item-skeleton-card {
    background: linear-gradient(
      90deg,
      color-mix(in srgb, var(--dw-surface-card) 78%, transparent) 0%,
      color-mix(in srgb, var(--dw-surface-elevated) 62%, transparent) 50%,
      color-mix(in srgb, var(--dw-surface-card) 78%, transparent) 100%
    );
    background-size: 220% 100%;
    animation: shimmer 1.25s linear infinite;
  }

  .skeleton-line {
    width: 100%;
    height: 13px;
    border-radius: var(--dw-radius-sm);
  }

  .skeleton-line.short {
    width: 44%;
  }

  .skeleton-line.medium {
    width: 68%;
  }

  .item-skeleton-card {
    border-radius: var(--dw-radius-xl);
    border: 1px solid var(--dw-border-subtle);
    background: var(--dw-surface-card);
    padding: var(--dw-spacing-sm);
    display: flex;
    flex-direction: column;
    gap: var(--dw-spacing-sm);
    min-height: 314px;
  }

  .item-skeleton-image {
    height: 220px;
    border-radius: var(--dw-radius-lg);
    display: grid;
    place-items: center;
  }

  .item-skeleton-image mat-icon,
  .highlight-skeleton-image mat-icon {
    color: color-mix(in srgb, var(--dw-primary) 44%, var(--dw-text-secondary) 56%);
    opacity: 0.68;
    animation: dw-loader-bob 1.5s ease-in-out infinite;
  }

  .item-skeleton-image mat-icon {
    font-size: 38px;
    width: 38px;
    height: 38px;
  }

  .highlight-skeleton-image {
    display: grid;
    place-items: center;
  }

  .highlight-skeleton-image mat-icon {
    font-size: 44px;
    width: 44px;
    height: 44px;
  }

  .item-skeleton-content {
    display: grid;
    gap: 8px;
  }

  .item-skeleton-tags {
    display: flex;
    gap: 8px;
  }

  .highlight-title {
    display: block;
    height: 18px;
  }

  .highlight-meta-line {
    display: block;
    height: 16px;
  }

  @media (max-width: 768px) {
    .fashion-loader,
    .runway-loader,
    .spotlight-loader {
      padding: 10px;
      gap: 10px;
    }

    .loader-caption {
      text-align: center;
      font-size: 12px;
    }

    .item-skeleton-card {
      min-height: 232px;
    }

    .item-skeleton-image {
      height: 140px;
    }
  }
}

// -----------------------------------------
// 10c. Collection List Skeletons
// -----------------------------------------
.dw-list-skeleton-card {
  position: relative;
  overflow: hidden;
  border-radius: var(--dw-radius-lg);
  border: 1px solid var(--dw-border-subtle);
  background:
    radial-gradient(
      circle at 82% 14%,
      color-mix(in srgb, var(--dw-primary) 10%, transparent),
      transparent 48%
    ),
    linear-gradient(
      165deg,
      color-mix(in srgb, var(--dw-surface-elevated) 86%, var(--dw-primary) 14%),
      var(--dw-surface-card)
    );
  box-shadow: var(--dw-shadow-sm);
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 314px;
  pointer-events: none;
}

.dw-list-skeleton-card.outfit {
  min-height: 352px;
}

.dw-list-skeleton-card::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    114deg,
    transparent 6%,
    color-mix(in srgb, var(--dw-surface-elevated) 58%, transparent) 43%,
    transparent 70%
  );
  transform: translateX(-140%);
  animation: dw-loader-sweep 2.1s ease-in-out infinite;
}

.dw-list-skeleton-media {
  height: 210px;
  border-radius: var(--dw-radius-md);
  border: 1px solid color-mix(in srgb, var(--dw-primary) 10%, transparent);
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--dw-surface-card) 80%, transparent) 0%,
    color-mix(in srgb, var(--dw-surface-elevated) 60%, transparent) 50%,
    color-mix(in srgb, var(--dw-surface-card) 80%, transparent) 100%
  );
  background-size: 220% 100%;
  animation: shimmer 1.25s linear infinite;
  display: grid;
  place-items: center;
}

.dw-list-skeleton-media.outfit {
  height: 248px;
}

.dw-list-skeleton-media mat-icon {
  font-size: 40px;
  width: 40px;
  height: 40px;
  color: color-mix(in srgb, var(--dw-primary) 44%, var(--dw-text-secondary) 56%);
  opacity: 0.7;
  animation: dw-loader-bob 1.5s ease-in-out infinite;
}

.dw-list-skeleton-content {
  display: grid;
  gap: 8px;
}

.dw-list-skeleton-line {
  display: block;
  width: 100%;
  height: 12px;
  border-radius: var(--dw-radius-full);
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--dw-surface-card) 78%, transparent) 0%,
    color-mix(in srgb, var(--dw-surface-elevated) 62%, transparent) 50%,
    color-mix(in srgb, var(--dw-surface-card) 78%, transparent) 100%
  );
  background-size: 220% 100%;
  animation: shimmer 1.2s linear infinite;
}

.dw-list-skeleton-line.medium {
  width: 72%;
}

.dw-list-skeleton-line.short {
  width: 48%;
}

.dw-list-skeleton-chip-row {
  display: flex;
  gap: 8px;
  margin-top: 2px;
}

.dw-list-skeleton-chip {
  display: block;
  width: 72px;
  height: 20px;
  border-radius: var(--dw-radius-full);
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--dw-primary) 18%, transparent),
    color-mix(in srgb, var(--dw-surface-elevated) 70%, transparent)
  );
  background-size: 220% 100%;
  animation: shimmer 1.15s linear infinite;
}

.dw-list-skeleton-chip.short {
  width: 56px;
}

@media (max-width: 768px) {
  .dw-list-skeleton-card {
    min-height: 232px;
    padding: 10px;
    gap: 8px;
  }

  .dw-list-skeleton-card.outfit {
    min-height: 258px;
  }

  .dw-list-skeleton-media {
    height: 136px;
  }

  .dw-list-skeleton-media.outfit {
    height: 158px;
  }

  .dw-list-skeleton-media mat-icon {
    font-size: 34px;
    width: 34px;
    height: 34px;
  }

  .dw-list-skeleton-line {
    height: 10px;
  }

  .dw-list-skeleton-chip {
    height: 18px;
    width: 58px;
  }
}

@keyframes dw-loader-bob {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
}

@keyframes dw-loader-sweep {
  0% {
    transform: translateX(-130%);
  }
  100% {
    transform: translateX(130%);
  }
}

@keyframes dw-loader-dots {
  0%,
  20% {
    width: 0;
  }
  40% {
    width: 4px;
  }
  70% {
    width: 9px;
  }
  100% {
    width: 14px;
  }
}

@keyframes dw-runway-glide {
  0% {
    left: -10%;
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    left: 100%;
    opacity: 0;
  }
}

@keyframes dw-runway-light {
  0% {
    left: -24%;
  }
  100% {
    left: 110%;
  }
}

@keyframes dw-spotlight-pulse {
  0%,
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 color-mix(in srgb, var(--dw-primary) 22%, transparent);
  }
  50% {
    transform: scale(1.03);
    box-shadow: 0 0 0 7px color-mix(in srgb, var(--dw-primary) 0%, transparent);
  }
}

/* Lightweight global motion system for shared UI patterns */
.glass,
.card,
.item-card,
.outfit-card,
.stat-card,
.category-card,
.highlight-card,
.action-btn,
.chip,
.icon-btn,
.mobile-nav-item,
.create-option,
.sheet-action,
.mat-mdc-menu-item,
.mat-mdc-list-item {
  transition:
    transform var(--dw-motion-fast) var(--dw-ease-emphasis),
    box-shadow var(--dw-motion-base) var(--dw-ease-emphasis),
    background-color var(--dw-motion-base) var(--dw-ease-emphasis),
    border-color var(--dw-motion-base) var(--dw-ease-emphasis),
    color var(--dw-motion-fast) var(--dw-ease-emphasis),
    opacity var(--dw-motion-fast) linear;
}

.mobile-bottom-nav,
.mat-mdc-menu-panel,
.mat-mdc-card,
.dw-mobile-profile-sheet .mat-mdc-bottom-sheet-container {
  animation: slideInUp var(--dw-motion-base) var(--dw-ease-emphasis);
}

@media (hover: hover) and (pointer: fine) {

  .action-btn:hover,
  .chip:hover,
  .icon-btn:hover,
  .mobile-nav-item:hover,
  .create-option:hover,
  .sheet-action:hover,
  .mat-mdc-menu-item:hover {
    transform: translateY(-1px);
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 1ms !important;
    scroll-behavior: auto !important;
  }
}

// -----------------------------------------
// 11. MATERIAL OVERRIDES
// -----------------------------------------

// Override Material buttons
.mat-mdc-button-base {
  font-family: 'Outfit', sans-serif !important;
  letter-spacing: 0.2px;
}

.mat-mdc-button.mat-primary,
.mat-mdc-raised-button.mat-primary,
.mat-mdc-unelevated-button.mat-primary {
  --mdc-filled-button-container-color: var(--dw-primary);
  --mdc-filled-button-label-text-color: var(--dw-on-primary);
  border-radius: var(--dw-radius-md) !important;
  color: var(--dw-on-primary) !important;
  letter-spacing: 0.5px;
}

.mat-mdc-unelevated-button:not(.mat-primary):not(.mat-accent):not(.mat-warn) {
  background: var(--dw-surface-card) !important;
  color: var(--dw-text-primary) !important;
  border: 1px solid color-mix(in srgb, var(--dw-primary) 18%, transparent) !important;
}

.mat-mdc-outlined-button {
  border-radius: var(--dw-radius-md) !important;
}

.mat-mdc-outlined-button:not(.mat-primary):not(.mat-accent):not(.mat-warn) {
  color: var(--dw-text-primary) !important;
  border-color: color-mix(in srgb, var(--dw-primary) 26%, transparent) !important;
  background: color-mix(in srgb, var(--dw-surface-elevated) 84%, transparent) !important;
}

.mat-mdc-outlined-button.mat-primary {
  color: var(--dw-primary) !important;
  border-color: color-mix(in srgb, var(--dw-primary) 40%, transparent) !important;
}

.mat-mdc-outlined-button.mat-warn {
  color: var(--dw-error) !important;
  border-color: color-mix(in srgb, var(--dw-error) 45%, transparent) !important;
}

.mat-mdc-button:not(.mat-primary):not(.mat-accent):not(.mat-warn) {
  color: var(--dw-text-primary) !important;
}

.mat-mdc-button-base .mat-icon {
  color: inherit;
}

// Override Material form fields
.mat-mdc-form-field {
  .mdc-text-field--filled:not(.mdc-text-field--disabled) {
    background-color: var(--dw-surface-card) !important;
  }

  .mdc-text-field--filled {
    border-radius: 12px !important;
  }

  .mdc-line-ripple {
    display: none;
  }
}

// Override Material cards
.mat-mdc-card {
  --mdc-elevated-card-container-color: var(--dw-surface-card);
  border-radius: var(--dw-radius-lg) !important;
  border: 1px solid var(--dw-border-subtle);
  box-shadow: var(--dw-shadow-sm) !important;
}

// Override Material dialogs
.mat-mdc-dialog-container {
  --mdc-dialog-container-color: var(--dw-surface-elevated);
  border-radius: var(--dw-radius-xl) !important;
}

// Override Material snackbar
.mat-mdc-snack-bar-container {
  --mdc-snackbar-container-color: var(--dw-text-primary);
  border-radius: var(--dw-radius-md) !important;
}

// Override Material chips
.mat-mdc-chip {
  --mdc-chip-elevated-container-color: var(--dw-surface-card);
  --mdc-chip-label-text-color: var(--dw-text-secondary);
  border-radius: var(--dw-radius-full) !important;
}

// Override Material menus (Fix transparency)
.mat-mdc-menu-panel {
  background-color: var(--dw-surface-elevated) !important;
  border: 1px solid var(--dw-border-subtle);
  box-shadow: var(--dw-shadow-lg) !important;
  border-radius: var(--dw-radius-lg) !important;

  .mat-mdc-menu-item {
    font-family: 'Outfit', sans-serif !important;
    color: var(--dw-text-primary) !important;

    .mat-icon {
      color: var(--dw-text-secondary);
    }

    &:hover {
      background-color: var(--dw-surface-card);
    }
  }
}

// Override Material select dropdowns (Fix transparency across app)
.mat-mdc-select-panel,
div.mat-mdc-select-panel,
.cdk-overlay-pane .mat-mdc-select-panel {
  background-color: var(--dw-surface-elevated) !important;
  border: 1px solid var(--dw-border-subtle);
  box-shadow: var(--dw-shadow-lg) !important;
  border-radius: var(--dw-radius-md) !important;
}

.mat-mdc-option {
  color: var(--dw-text-primary) !important;
  font-family: 'Outfit', sans-serif !important;
}

.mat-mdc-option .mdc-list-item__primary-text {
  color: var(--dw-text-primary) !important;
}

.mat-mdc-option:hover:not(.mdc-list-item--disabled),
.mat-mdc-option.mat-mdc-option-active {
  background-color: var(--dw-surface-card) !important;
}

// -----------------------------------------
// 11. RICH PROFILE MENU OVERRIDES
// -----------------------------------------
.user-menu-custom {
  min-width: 280px !important;
  max-width: 320px !important;
  border-radius: 16px !important;
  overflow: hidden !important; // Clip header corners
  border: none !important; // Override default border
  box-shadow: var(--dw-shadow-lg) !important;

  .mat-mdc-menu-content {
    padding-top: 0 !important;
    padding-bottom: 8px !important;
  }

  // User Info Header
  .menu-user-info {
    background: linear-gradient(135deg, var(--dw-primary) 0%, var(--dw-accent) 100%);
    padding: 24px 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 8px;
    position: relative;
    cursor: default;

    // Decorative pattern overlay
    &::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px);
      background-size: 12px 12px;
      opacity: 0.3;
      pointer-events: none;
    }

    .info-avatar {
      position: relative;
      z-index: 1;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;

      img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      mat-icon {
        color: white;
        font-size: 32px;
        width: 32px;
        height: 32px;
      }
    }

    .info-content {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;

      .user-name {
        color: white;
        font-family: 'Outfit', sans-serif;
        font-weight: 700;
        font-size: 16px;
        line-height: 1.2;
        letter-spacing: 0.01em;
      }

      .user-email {
        color: rgba(255, 255, 255, 0.7);
        font-size: 12px;
        margin-bottom: 6px;
      }

      .user-plan {
        align-self: flex-start;
        font-size: 10px;
        padding: 2px 8px;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(4px);
        letter-spacing: 0.05em;
        text-transform: uppercase;
        border-radius: 99px;
      }
    }
  }

  // Menu Items
    .mat-mdc-menu-item {
    font-family: 'Outfit', sans-serif !important;
    font-weight: 500 !important;
    font-size: 14px !important;
    color: var(--dw-text-primary) !important;
    min-height: 48px !important;
    margin: 0 8px 2px 8px;
    border-radius: 8px;
    width: auto !important;

    .mat-icon {
      color: var(--dw-text-muted);
      margin-right: 16px;
      opacity: 0.8;
      transition: all 0.2s;
    }

    &:hover {
      background-color: var(--dw-surface-hover);
      color: var(--dw-primary) !important;

      .mat-icon {
        color: var(--dw-primary);
        opacity: 1;
        transform: translateX(2px);
      }
    }
  }

  // Logout Specifics
  .logout-item {
    margin-top: 4px;
    color: var(--dw-error) !important;

    .mat-icon {
      color: var(--dw-error) !important;
      opacity: 0.7;
    }

    &:hover {
      background-color: color-mix(in srgb, var(--dw-error) 12%, transparent) !important;
      color: var(--dw-error) !important;

      .mat-icon {
        opacity: 1;
      }
    }
  }

  // Divider
  .mat-divider {
    border-top-color: var(--dw-border-subtle) !important;
    margin: 8px 0 !important;
  }

  @media (max-width: 768px) {
    min-width: min(92vw, 360px) !important;
    max-width: min(92vw, 360px) !important;

    .mat-mdc-menu-content {
      padding-bottom: 6px !important;
    }
  }
}

.dw-mobile-profile-sheet {
  .mat-bottom-sheet-container,
  .mat-mdc-bottom-sheet-container {
    background: var(--dw-surface-elevated) !important;
    color: var(--dw-text-primary) !important;
    border: 1px solid var(--dw-border-subtle);
    border-radius: 20px 20px 0 0;
    box-shadow: var(--dw-shadow-lg) !important;
  }
}

.cdk-overlay-backdrop.dw-mobile-sheet-backdrop {
  background: var(--dw-overlay-scrim);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}
